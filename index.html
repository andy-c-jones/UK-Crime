<!DOCTYPE html>
    <html>
        <head>
            <title>UK Crime</title>
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
        </head>
    <body>
    <link rel="StyleSheet" href="crime.css" type="text/css">

    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCHmQVjH8q4lAEx6BO9LQ4JLG4wF3wTYrI&sensor=false"></script>

    <script type="text/javascript">
        var MapOptions = null;
        var Map = null;
        var HttpRequest = null;

        function initialise() {
            MapOptions = {
                center: new google.maps.LatLng(53, -3),
                zoom: 7,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

             Map = new google.maps.Map(document.getElementById("map-canvas"), MapOptions);

            GetXMLHttpObject();
        }

         function GetXMLHttpObject()
        {
            if (window.XMLHttpRequest)
            {
                HttpRequest = new XMLHttpRequest();
            }
            else if (window.ActiveXObject)
            {
                // IE 6 compatibility
                HttpRequest = new ActiveXObject("Microsoft.XMLHTTP");
            }
        }

        function Search() {
            HttpRequest.open("GET", "QueryPoliceAPI.php?location=" + document.getElementById("SearchBox").value);
            HttpRequest.onreadystatechange = FillTable;
            HttpRequest.send();

            AddMarkers();
            FillTable();
        }

        function AddMarkers()
        {
            var marker = new google.maps.Marker({ map: Map, position: new google.maps.LatLng(52.9, -2.9), clickable: true });
            var infowindow = new google.maps.InfoWindow({content:"Hello World!"});
            infowindow.open(Map,marker);
        }

        function FillTable()
        {
            if (HttpRequest.readyState == 4 && HttpRequest.status == 200)
            {
                document.getElementById("crimetable").removeAttribute("hidden");
                var responseText = HttpRequest.responseText;
                
                for (i = 1; i < 6; i++)
                {
                    document.getElementById("crime" + i.toString()).innerHTML=responseText + i.toString();
                    document.getElementById("desc" + i.toString()).innerHTML=responseText + i.toString();
                    document.getElementById("loc" + i.toString()).innerHTML=responseText + i.toString();
                }
            }
        }

        google.maps.event.addDomListener(window, 'load', initialise);
    </script>

    <div class="navbar">
        <div class="navbar-inner">
            <a class="brand" href="#">Crime UK</a>
            <form class="navbar-search pull-left">
                <input id="SearchBox" type="text" class="search-query" placeholder="Search By Postcode">
            </form>
            <i class="icon-search" hidden></i>
            <button class="btn" onclick="Search()">Search</button>
        </div>
    </div>

    <div class="fade in">
        <button type="button" class="close" data-dismiss="alert">&#x2716;</button>
        <h4 class="alert-heading">Welcome To Crime UK!</h4>
        <p>Search for crimes in your area by typing your postcode into the search box.</p>
    </div>

    <p></p>

    <div class="mapbox" id="map-canvas"></div>

    <p></p>

    <table id="crimetable" class="table table-bordered table-striped" hidden>
        <thead>
            <tr>
                <th>Crime</th>
                <th>Description</th>
                <th>Location</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td id="crime1">Murder</td>
                <td id="desc1">It was pretty brutal</td>
                <td id="loc1">Derby, UK</td>
            </tr>
                    <tr>
                <td id="crime2">Murder</td>
                <td id="desc2">It was pretty brutal</td>
                <td id="loc2">Derby, UK</td>
            </tr>
            <tr>
                <td id="crime3">Murder</td>
                <td id="desc3">It was pretty brutal</td>
                <td id="loc3">Derby, UK</td>
            </tr>
            <tr>
                <td id="crime4">Murder</td>
                <td id="desc4">It was pretty brutal</td>
                <td id="loc4">Derby, UK</td>
            </tr>
            <tr>
                <td id="crime5">Murder</td>
                <td id="desc5">It was pretty brutal</td>
                <td id="loc5">Derby, UK</td>
            </tr>
        </tbody>
    </table>

    <div class="righttext">
        <p><small >This is a website by <a href="http://www.github.com/andy-c-jones">Andrew "AJ" Jones</a>.</small></p>
    </div>

    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    </body>
</html>